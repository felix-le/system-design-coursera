# What is system design?

System design is the process of defining:

- Architecture
- Interface
- data
  for a system that satisfies specific requirements. => we know about it before finding

In other words, system design meets the needs of your business or organization through coherent and efficient systems.
It requires a systematic approach to building and engineering systems.
Good system design: thing about everything, from infrastructure all the way down to the data and how it's stored.

## Domain name system (DNS)

IP addresses will enable every machine to connect with other machines.
Domain Name system which is a hierarchical and decentralized naming system used for translating human-readable domain name to IP addresses.

### How it work?

There are 8 steps:

1. an end-user types example.com into a web browser, the query travels to the internet and is received by a DNS resolver.
2. The resolver then recursively queries a DNS root nameserver.
3. The root server responds to the resolver with the address of a Top-Level Domain (TLD)
4. The resolver then makes a request to the .com TLD
5. The TLD server then responds with the IP address of the domain's nameserver, example.com
6. Lastly, the recursive resolver sends a query to the domain's nameserver.
7. The IP address for example.com is then returned to the resolver from the nameserver.
8. The DNS resolver then responds to the web browser with the IP address of the domain requested initially.

### Server types

#### DNS Resolver

A DNS resolver (DNS recursive resolver) is the first stop in a DNS query. The recursive resolver acts as a middleman between a client and a DNS nameserver.
After receiving a DNS query from a web client -> it will either respond with cached data, or send a request to a root nameserver, followed by another request to a TLD nameserver, and then one last request to an authoritative nameserver.
After receiving a response from the authoritative nameserver containing the requested IP address, the recursive resolver then sends a response to the client.

#### DNS root server

A root server accepts a recursive resolver's query which includes a domain name, and the root nameserver responds by directing the recursive resolver to a TLD nameserver, based on the extension that domain (.com, .net, etc.)

There are 13 DNS root nameservers know to every recursive resolver. There are 13 types of root nameservers, but there are multiple copies of each one all over the world.

#### TLD nameserver (top-level domain)

A TLD nameserver maintains information for the all domain names that share a common domain extension: `.com`, `.net`

- Generic top-level domains: `.com`, `.org`, `.net`,`.edu`, `.gov`
- country code top-level domains: `.uk`, `.us`, `.ru`

#### Authoritative DNS server

The authoritative nameserver is usually the resolver's last step in the journey for an IP address.

The authoritative nameserver contains information specific to the domain name it serves and it can provide a recursive resolver with the IP address of that server found in the DNS A record or CNAME record (alias) -> it will provide the recursive resolver with an alias domain, at which point the recursive resolver will have to perform a whole new DNS lookup to procure a record from an authoritative nameserver
-> A record containing an IP address. If it cannot find the domain, returns the NXDOMAIN message

#### Query types:

3 types:

- Recursive:

* a DNS client requires that a DNS server (typically a DNS recursive resolver) will respond to the client with either the requested resource record or an error message (if can't find the record)

- Iterative

* a DNS client provides a hostname, and the DNS Resolver returns the best answer it can. If the DNS resolver has the relevant DNS records in its cache, it returns them. if not, it refers the DNS client to the Root Server or another Authoritative Name Server that is nearest to the required DNS zone. The DNS client must then repeat the query directly against the DNS server it was referred.

- Non-recursive

* A non-recursive query is a query in which the DNS Resolver already knows the answer. It either immediately returns a DNS record because it already stores it in a local cache or queries a DNS Name Server which is authoritative ofr the record -> definitely holds the correct IP for that hostname.
* Both cases, no need for additional rounds of queries (like in recursive or iterative queries). Rather a response is immediately returned to the client

#### Record Types

DNS record (aka zone files) are instructions that live in authoritative DNS server and provide information about a domain including what IP address with that domain and how to handle requests for that domain.

These records consist of a series of text files written in what is know as `DNS syntax`. It is a string of characters used commands that tell the DNS server what to do. `TTL`, which stands for time-to-live, and how often a DNS server will refresh that record.

- A (address record): This is the record that holds the IP address of a domain
- AAAA (IP version 6 address record): the record that contains the IPv6 address for a domain (as opposed to A record - IPv4 address)
- CNAME(Canonical Name record): Forwards one domain or subdomain to another domain, doesn't provide an IP address.
- MX (Mail exchanger record)" Direct mail to an email server.
- TXT (Text record): This record lets an admin store text notes in the record. These records are often used for email security
- NS (name server records): Stores the name server for a DNS entry
- SOA (Start of authority): Stores admin information about a domain
- SRV (Service Location record): Specifies a port for specific services.
- PTR (Reverse-lookup Pointer record): Provides a domain name in reverse lookups.
- CERT (Certificate record): Stores public key certificates.

#### Subdomains:

- A subdomain is an additional part of our main domain name.
- It is commonly used to logically separate a website into sections

#### DNS Zones:

- it is a distinct part of the domain namespace which is delegated to a legal entity like a person, organization, or company who is responsible for maintaining the DNS zone. A DNS zone is also an administrative function, allowing for granular control of DNS components, such as authoritative name servers.

#### DNS caching

A DNS cache (DNS resolver cache) is a temporary database, maintained by a computer's operating system, that contain records of all the recent visits and attempted visits to websites and other internet domains. In other words, a DNS cache is just a memory of recent DNS lookups that our computer can quickly refer to when it's trying to figure out how to load a website.

The domain Name System implements a time-to-live (TTL) on every DNS record. TTL specifies the number of seconds the record can be cached by a DNS client or server. When the record is stored in a cache, whatever TTL value came with it gets stored as well. The server continues to update the TTL of the record stored in the cache, counting down every second. When it hits zero, the record is deleted or purged from the cache. At that point, if a query for that record is received, the DNS server has to start the resolution process.

#### Reverse DNS

A reverse DNS lookup is a DNS query for the domain name associated with a given IP address.

- for forward DNS lookup, DNS system is queried to return an IP address.
- The process of reverse resolving an IP address uses PTR records. If the server doesn't have a a PTR record, it cannot resolve a reverse lookup
- Reverse lookups are commonly used by email servers. The server will check and see if an email message came from a valid server before bringing it onto their network. Many email servers will reject messages from any server that doesn't support reverse lookups or from a server that is highly unlikely to be legitimate
  Note: Reverse DNS lookups are not universally adopted as they are not critical to the normal function on the internet.
